#
# Copyright 2016 Blockie AB
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

_dep_install:
    _info:
        title: Install the latest Docker Engine.
        desc: |
            Downloads and installs the latest Docker Engine from Docker.
            Also adds the targetuser to the docker group.
    _env:
        - targetuser: ${targetuser:-${SSHUSER-}}
        - CMD: DOCKER_DEP_INSTALL "${targetuser-}"
enter:
    _info:
        title: Enter a running container.
    _env:
        - container: ${container-}
        - shell: ${shell-}
        - CMD: DOCKER_ENTER ${container-} ${shell-}
ps:
    _info:
        title: List containers.
    _env:
        - CMD: DOCKER_PS
rm:
    status:
        _info:
            title: Remove container(s) by their status.
        _env:
            - CMD: DOCKER_RM_STATUS

volume:
    create:
        _info:
            title: Perform 'docker volume create'.
        _env:
            - volume: ${volume-}
            - driver: ${driver-}
            - opts: ${opts-}
            - labels: ${labels-}
            - CMD: DOCKER_VOLUME_CREATE -- ${volume-} ${driver-} ${opts-} ${labels-}
    chmod:
        _info:
            title: Set the permissions and onwership of the mountpoint for the volume.
        _env:
            - volume: ${volume-}
            - chmod: ${chmod-}
            - chown: ${chown-}
            - CMD: DOCKER_VOLUME_CHMOD -- ${volume-} ${chmod-} ${chown-}
    rm:
        _info:
            title: Perform 'docker volume rm'.
        _env:
            - volume: ${volume-}
            - CMD: DOCKER_VOLUME_RM -- ${volume-}
    ls:
        _info:
            title: Perform 'docker volume ls'.
        _env:
            - CMD: DOCKER_VOLUME_LS
    inspect:
        _info:
            title: Perform 'docker volume inspect'.
        _env:
            - volume: ${volume-}
            - CMD: DOCKER_VOLUME_INSPECT -- ${volume-}
    empty:
        _info:
            title: Delete all files in volume.
        _env:
            - volume: ${volume-}
            - CMD: DOCKER_VOLUME_EMPTY -- ${volume-}
    restore:
        _info:
            title: Restores a snapshot into a volume, possibly deletes all files first.
        _env:
            - volume: ${volume-}
            - archive: ${archive-}
            - rmrf: ${rmrf-}
            - CMD: DOCKER_VOLUME_RESTORE -- ${volume-} ${archive-} ${rmrf-}
    snapshot:
        _info:
            title: Perform 'docker volume create'.
        _env:
            - volume: ${volume-}
            - archive: ${archive-}
            - CMD: DOCKER_VOLUME_SNAPSHOT -- ${volume-} ${archive-}
